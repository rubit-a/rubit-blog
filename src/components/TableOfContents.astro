---
interface Heading {
	depth: number;
	slug: string;
	text: string;
}

interface Props {
	headings: Heading[];
}

const { headings } = Astro.props;

// Filter to only show h2 and h3
const filteredHeadings = headings.filter((h) => h.depth <= 3);
---

{
	filteredHeadings.length > 0 && (
		<nav class="toc">
			<h2>목차</h2>
			<ul>
				{filteredHeadings.map((heading) => (
					<li class={`depth-${heading.depth}`}>
						<a href={`#${heading.slug}`}>{heading.text}</a>
					</li>
				))}
			</ul>
		</nav>
	)
}

<style>
	.toc {
		background-color: rgb(var(--gray-light));
		border-left: 4px solid rgb(var(--accent));
		padding: 1.5rem;
		margin: 2rem 0;
		border-radius: 0.5rem;
	}
	.toc h2 {
		margin-top: 0;
		margin-bottom: 1rem;
		font-size: 1.25rem;
		color: rgb(var(--gray-dark));
	}
	.toc ul {
		list-style: none;
		margin: 0;
		padding: 0;
	}
	.toc li {
		margin: 0.5rem 0;
	}
	.toc li.depth-2 {
		margin-left: 0;
	}
	.toc li.depth-3 {
		margin-left: 1rem;
		font-size: 0.9rem;
	}
	.toc a {
		color: rgb(var(--gray-dark));
		text-decoration: none;
		transition: color 0.2s ease;
	}
	.toc a:hover {
		color: rgb(var(--accent));
	}
</style>
